---
/**
 * Header Component
 * Прозрачный header поверх Hero-секции
 * Становится затемнённым при скролле
 */

const menuItems = [
  { label: 'О центре', href: '#about' },
  { label: 'Услуги', href: '#services' },
  { label: 'Обучение гипнозу', href: '#training' },
  { label: 'Отзывы', href: '#reviews' },
  { label: 'Эксперты', href: '#experts' },
  { label: 'Цены', href: '#courses' },
  { label: 'Частые вопросы', href: '#faq' },
  { label: 'Контакты', href: '#contact' },
]
---

<header class="header" data-header>
  <div class="header__inner container">
    <!-- Logo -->
    <a href="/" class="header__logo">
      <img 
        src="/images/logo.png" 
        alt="ЦЕРГ — Центр регрессивного гипноза" 
        width="182" 
        height="49"
      />
    </a>

    <!-- Desktop Navigation -->
    <nav class="header__nav">
      {menuItems.map((item) => (
        <a href={item.href} class="header__link">
          {item.label}
        </a>
      ))}
    </nav>

    <!-- CTA Button -->
    <a href="#contact" class="header__cta">
      Связаться с нами
    </a>

    <!-- Mobile Menu Button -->
    <button 
      type="button"
      class="header__burger"
      aria-label="Открыть меню"
      data-menu-toggle
    >
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <line x1="3" y1="6" x2="21" y2="6" />
        <line x1="3" y1="12" x2="21" y2="12" />
        <line x1="3" y1="18" x2="21" y2="18" />
      </svg>
    </button>
  </div>
</header>

<!-- Mobile Menu Overlay -->
<div class="mobile-menu" data-mobile-menu>
  <div class="mobile-menu__inner container">
    <nav class="mobile-menu__nav">
      {menuItems.map((item) => (
        <a href={item.href} class="mobile-menu__link" data-menu-link>
          {item.label}
        </a>
      ))}
    </nav>
    <a href="#contact" class="mobile-menu__cta" data-menu-link>
      Связаться с нами
    </a>
  </div>
  
  <!-- Close Button -->
  <button 
    type="button"
    class="mobile-menu__close"
    aria-label="Закрыть меню"
    data-menu-close
  >
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <line x1="18" y1="6" x2="6" y2="18" />
      <line x1="6" y1="6" x2="18" y2="18" />
    </svg>
  </button>
</div>

<style>
  /* Header */
  .header {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    z-index: 50;
    padding: 20px 0;
    transition: all 0.3s ease;
  }

  .header.scrolled {
    background: rgba(0, 0, 0, 0.8);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    padding: 12px 0;
  }

  .header__inner {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 1.5rem;
    width: 100%;
  }

  .header__logo {
    flex-shrink: 0;
  }

  .header__logo img {
    height: 40px;
    width: auto;
  }

  @media (min-width: 768px) {
    .header__logo img {
      height: 49px;
    }
  }

  /* Navigation */
  .header__nav {
    display: none;
    align-items: center;
    gap: 1.5rem;
  }

  @media (min-width: 1280px) {
    .header__nav {
      display: flex;
      gap: 2rem;
    }
  }

  @media (min-width: 1400px) {
    .header__nav {
      gap: 2.2rem;
    }
  }

  .header__link {
    color: white;
    font-size: 16px;
    font-weight: 400;
    text-decoration: none;
    white-space: nowrap;
    transition: opacity 0.2s ease;
  }

  .header__link:hover {
    opacity: 0.7;
  }

  /* CTA Button */
  .header__cta {
    display: none;
    align-items: center;
    justify-content: center;
    padding: 16px 32px;
    background: white;
    color: black;
    font-size: 16px;
    font-weight: 400;
    text-decoration: none;
    border-radius: 999px;
    white-space: nowrap;
    transition: all 0.2s ease;
  }

  @media (min-width: 768px) {
    .header__cta {
      display: inline-flex;
    }
  }

  .header__cta:hover {
    background: #f0f0f0;
  }

  /* Burger */
  .header__burger {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
    background: none;
    border: none;
    color: white;
    cursor: pointer;
  }

  @media (min-width: 1280px) {
    .header__burger {
      display: none;
    }
  }

  /* Mobile Menu */
  .mobile-menu {
    position: fixed;
    inset: 0;
    z-index: 100;
    background: rgba(0, 0, 0, 0.95);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.3s ease;
  }

  .mobile-menu.open {
    opacity: 1;
    pointer-events: auto;
  }

  .mobile-menu__inner {
    height: 100%;
    display: flex;
    flex-direction: column;
    padding-top: 100px;
    padding-bottom: 2rem;
  }

  .mobile-menu__nav {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
  }

  .mobile-menu__link {
    color: white;
    font-size: 1.5rem;
    font-weight: 500;
    text-decoration: none;
    transition: color 0.2s ease;
  }

  .mobile-menu__link:hover {
    color: #71BB70;
  }

  .mobile-menu__cta {
    margin-top: auto;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 1.25rem 2rem;
    background: #71BB70;
    color: white;
    font-size: 1.125rem;
    font-weight: 700;
    text-transform: uppercase;
    text-decoration: none;
    border-radius: 999px;
    transition: background 0.2s ease;
  }

  .mobile-menu__cta:hover {
    background: #5EA85D;
  }

  .mobile-menu__close {
    position: absolute;
    top: 20px;
    right: 20px;
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: none;
    border: none;
    color: white;
    cursor: pointer;
  }
</style>

<script>
  // Mobile menu toggle
  const menuToggle = document.querySelector('[data-menu-toggle]')
  const menuClose = document.querySelector('[data-menu-close]')
  const mobileMenu = document.querySelector('[data-mobile-menu]')
  const menuLinks = document.querySelectorAll('[data-menu-link]')

  function openMenu() {
    mobileMenu?.classList.add('open')
    document.body.style.overflow = 'hidden'
  }

  function closeMenu() {
    mobileMenu?.classList.remove('open')
    document.body.style.overflow = ''
  }

  menuToggle?.addEventListener('click', openMenu)
  menuClose?.addEventListener('click', closeMenu)
  menuLinks.forEach(link => link.addEventListener('click', closeMenu))

  // Header scroll effect
  const header = document.querySelector('[data-header]')
  
  function handleScroll() {
    if (window.scrollY > 50) {
      header?.classList.add('scrolled')
    } else {
      header?.classList.remove('scrolled')
    }
  }

  window.addEventListener('scroll', handleScroll)
  handleScroll() // Check on load
</script>
